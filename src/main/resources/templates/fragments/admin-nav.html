

<th:block th:fragment="navlinks(activeLink)">
    <!--Menu START-->
    <div class="menu-logo">
        <div class="navbar-brand">

            <span class="navbar-caption-wrap">
                <a class="navbar-caption text-white" th:href="@{/}">
                    WebDatLich
                </a>
            </span>
        </div>
    </div>
    <div class="collapse navbar-collapse" id="navbarSupportedContent navbarResponsive">
        <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
            <ul class="navbar-nav flex-grow-1">
                <li class="nav-item" th:classappend="${activeLink} == 'home' ? 'active':''">
                    <a class="nav-link link text-white " th:href="@{/}">Home</a>
                </li>

                <li class="nav-item" th:classappend="${activeLink} == 'appointments' ? 'active':''">
                    <a class="nav-link" th:href="@{/appointments/all}">Lịch hẹn</a>
                </li>
                <li class="nav-item" th:classappend="${activeLink} == 'works' ? 'active':''">
                    <a class="nav-link" th:href="@{/works/all}">Nội dung lịch hẹn</a>
                </li>
                <li class="nav-item" th:classappend="${activeLink} == 'doctors' ? 'active':''">
                    <a class="nav-link" th:href="@{/doctors/all}">Bên tạo lịch</a>
                </li>
                <li class="nav-item" th:classappend="${activeLink} == 'customers' ? 'active':''">
                    <a class="nav-link" th:href="@{/customers/all}">Bên đặt lịch</a>
                </li>
                <li class="nav-item" th:classappend="${activeLink} == 'invoices' ? 'active':''">
                    <a class="nav-link" th:href="@{/invoices/all}">Hóa đơn</a>
                </li>
                <li class="nav-item">
                    <a id="barcodeLink" class="nav-link link text-white" href="#">Barcode</a>
                </li>
            </ul>
        </div>
        <!--Menu end-->


    </div>
    <!--Menu END-->

    <script th:inline="javascript">
        // Lắng nghe sự kiện click trên liên kết "Barcode"
        document.getElementById("barcodeLink").addEventListener("click", function(event) {
            // Ngăn chặn hành vi mặc định của liên kết
            event.preventDefault();

            // Mở cửa sổ quét barcode
            var scannedBarcode = prompt("Vui lòng quét mã barcode:");

            // Kiểm tra nếu có dữ liệu barcode được quét
            if (scannedBarcode !== null && scannedBarcode !== "") {
                // Gửi yêu cầu HTTP để xử lý dữ liệu barcode
                fetch("/scan/" + scannedBarcode)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Có lỗi xảy ra khi xử lý barcode.");
                        }
                        // Trả về nội dung của response
                        return response.text();
                    })
                    .then(data => {
                        // Hiển thị kết quả từ server (ví dụ: thông báo thành công hoặc lỗi)
                        // alert(data);
                        window.location.href = data;
                    })
                    .catch(error => {
                        // Xử lý lỗi nếu có
                        console.error("Lỗi: ", error);
                        alert("Có lỗi xảy ra khi xử lý barcode.");
                    });
            }
        });
    </script>

</th:block>